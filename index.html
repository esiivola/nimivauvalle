<!doctype html>
<html lang="fi">
  <head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-NJMD9WQQ');</script>
    <!-- End Google Tag Manager -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Nimihaku</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&family=Merienda:wght@700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.css" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJMD9WQQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header class="page-header">
      <div class="branding">
        <!--<p class="eyebrow"></p>-->
        <h1 class="hero-title">Nimi vauvalle</h1>
        <p class="hero-subtitle">
          Sivu auttaa sinua löytämään kaikista sopivimman nimen uudelle perheenjäsenellesi.
          <button class="link-button" type="button" id="open-story">Sivun tarina</button>
        </p>
      </div>
      <a class="ghost favorite-nav" href="favorites.html">Avaa suosikit</a>
      <div class="ad-slot ad-top" aria-label="Main ad placeholder">Mainospaikka</div>
    </header>

    <main class="layout">
      <section class="filters" aria-labelledby="filters-title">
        <h2 id="filters-title">Millaista nimeä etsit?</h2>
        <form id="filter-form">
          <div class="filter-block">
            <h3>Perustiedot</h3>
            <div class="block-grid">
              <fieldset class="gender-field">
                <legend>Nimen sukupuoli</legend>
                <label><input type="checkbox" name="gender" value="female" checked /> Tyttö</label>
                <label><input type="checkbox" name="gender" value="male" checked /> Poika</label>
                <label><input type="checkbox" name="gender" value="unisex" checked /> Sukupuolineutraalit nimet</label>
              </fieldset>
              <label class="surname-field">
                Kirjoita vauvan sukunimi
                <input type="text" id="surname-input" name="surname" placeholder="Esim. Korhonen" autocomplete="off" />
                <span class="hint">
                  Sukunimeä käytetään sopivien etunimien suositteluun. Sukunimeä ei tallenneta.  
                  <button type="button" class="link-button" id="edit-weight-button">Säädä suosittelualgoritmia</button>
                </span>
                <div id="surname-analysis" class="hint surname-analysis"></div>
              </label>
            </div>
          </div>

          <details id="desired-filter-panel" open>
            <summary>Nimen toivotut ominaisuudet</summary>
            <p class="hint tri-legend">○ ei aktiivinen · + vain tällaiset nimet · – poista tällaiset nimet</p>
            <div id="feature-filters"></div>
          </details>

          <details id="range-filter-panel">
            <summary>Nimen kirjain- ja pituusrajoitukset</summary>
            <div class="letter-grid">
              <label>
                Nimen tulee sisältää
                <input type="text" id="letters-include" placeholder="Esim. ar" autocomplete="off" />
                <span class="hint">Kirjoita merkit, jotka nimessä täytyy esiintyä.</span>
              </label>
              <label>
                Nimen ei tule sisältää
                <input type="text" id="letters-exclude" placeholder="Esim. zxq-" autocomplete="off" />
                <span class="hint">Kirjoita merkit, joita nimessä ei saa olla.</span>
              </label>
            </div>
            <div class="range-grid">
              <div class="range-field">
                <div class="range-header">
                  <span>Merkkien määrä</span>
                  <span id="letters-range-label" class="range-value"></span>
                </div>
                <div class="dual-slider" id="letters-slider"></div>
              </div>
            </div>
          </details>

          <details id="popularity-filter-panel">
            <summary>Nimen suosioon liittyvät rajoitukset</summary>
            <p class="hint tri-legend">○ ei aktiivinen · + vain tällaiset nimet · – poista tällaiset nimet</p>
            <div id="popularity-filters" class="popularity-grid"></div>
            <div class="range-field">
              <div class="range-header">
                <span>Nimenhaltijoiden määrä</span>
                <span id="population-range-label" class="range-value"></span>
              </div>
              <div class="number-range">
                <label>
                  Minimi
                  <input type="text" id="population-min" inputmode="numeric" placeholder="0" />
                </label>
                <label>
                  Maksimi
                  <input type="text" id="population-max" inputmode="numeric" placeholder="45 000" />
                </label>
              </div>
            </div>
          </details>
        </form>
      </section>

      <section class="results" aria-live="polite">
        <div class="ad-slot ad-inline-top" aria-label="Results ad placeholder">Mainospaikka</div>
        <div class="results-ordering">
          <label class="sort-label">
            Järjestä
            <select id="sort-key"></select>
          </label>
          <button class="ghost" type="button" id="toggle-sort">↓</button>
        </div>
        <div class="results-bar">
          <div>
            <strong id="result-count">Ladataan nimiä…</strong>
            <span id="match-context"></span>
            <div id="active-filters" class="filter-summary"></div>
          </div>
        </div>
        <div id="results-list" class="name-list" aria-live="polite"></div>
        <div class="load-more-row">
          <button type="button" class="primary" id="load-more" disabled>Näytä lisää nimiä</button>
        </div>
      </section>
      <aside class="ad-rail" aria-label="Side ad placeholder">
        <div class="ad-slot ad-rail-slot">Mainospaikka</div>
      </aside>
    </main>

    <template id="phonetic-filter-template">
      <div class="filter-row" data-id="">
        <select class="feature-select"></select>
        <button type="button" class="ghost small tri-toggle mode-toggle" data-state="include">+</button>
        <button type="button" class="ghost small" data-action="remove">Poista</button>
      </div>
    </template>

    <template id="group-filter-template">
      <div class="filter-row" data-id="">
        <select class="group-select"></select>
        <button type="button" class="ghost small tri-toggle group-mode-toggle" data-state="include">+</button>
        <button type="button" class="ghost small" data-action="remove">Poista</button>
      </div>
    </template>

    <template id="popularity-filter-template">
      <div class="filter-row" data-id="">
        <select class="popularity-select"></select>
        <select class="popularity-mode-select">
          <option value="include">Vain tällaiset nimet</option>
          <option value="exclude">Poista tällaiset nimet</option>
        </select>
        <button type="button" class="ghost small" data-action="remove">Poista</button>
      </div>
    </template>

    <div id="weight-editor" class="modal" role="dialog" aria-modal="true" aria-labelledby="weight-editor-title" hidden>
      <div class="modal-backdrop" data-action="dismiss-weight-editor"></div>
      <div class="modal-panel">
        <header class="modal-header">
          <div>
            <p class="eyebrow" id="weight-editor-eyebrow">Sukunimen painot</p>
            <h2 id="weight-editor-title">Muokkaa pisteytyksen painoja</h2>
          </div>
          <button type="button" class="icon-button" data-action="dismiss-weight-editor" aria-label="Sulje">x</button>
        </header>
        <p id="weight-editor-description" class="hint"></p>
        <div id="weight-editor-list" class="weight-editor-list"></div>
        <div class="weight-editor-footer">
          <div class="weight-editor-status">
            <div id="weight-editor-total" class="weight-editor-total"></div>
            <div id="weight-editor-remaining" class="weight-editor-remaining"></div>
            <div id="weight-editor-error" class="weight-editor-error" role="alert"></div>
          </div>
          <div class="weight-editor-actions">
            <button type="button" class="ghost" data-action="reset-weight-editor">Palauta oletukset</button>
            <span class="weight-editor-actions-spacer"></span>
            <button type="button" class="ghost" data-action="cancel-weight-editor">Peruuta</button>
            <button type="button" class="primary" id="weight-editor-save" data-action="save-weight-editor" disabled>OK</button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.0/dist/nouislider.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/wnumb@1.2.0/wNumb.min.js"></script>
    <script type="module" src="app.js"></script>

    <div id="story-modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="story-title" hidden>
      <div class="modal-backdrop" data-action="dismiss-story"></div>
      <div class="modal-panel story-panel">
        <header class="modal-header">
          <div>
            <p class="eyebrow">Sivun tarina</p>
            <h2 id="story-title">Mistä idea syntyi</h2>
          </div>
          <button type="button" class="icon-button" data-action="dismiss-story" aria-label="Sulje">x</button>
        </header>
        <p class="story-text">
          Sivun kehitys alkoi syksyllä 2025 perheen esikoista odottaessa. Lapsen nimen pähkäily on yksi odotuksen mukavimmista asioista. Netin pitkiä nimilistoja selatessa keskittyminen kuitenkin alkoi herpaantua melko pian. Perheen insinööritaustainen isä totesi, että tämän voi tehdä paremmin, ja päätti toteuttaa Suomen parhaan nettisivun vauvan nimen valintaan.
        </p>
      </div>
    </div>
  <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
<script>eruda.init();</script>
  </body>
</html>
